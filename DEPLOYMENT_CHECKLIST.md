# éƒ¨ç½²æ£€æŸ¥æ¸…å•

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### æœåŠ¡å™¨å‡†å¤‡

- [ ] Ubuntu 20.04+ æœåŠ¡å™¨å·²å‡†å¤‡
- [ ] æœåŠ¡å™¨é…ç½®æ»¡è¶³è¦æ±‚ï¼ˆ2 æ ¸ 4G+ï¼‰
- [ ] å·²è·å–æœåŠ¡å™¨ IP åœ°å€
- [ ] å¯ä»¥ SSH è¿æ¥åˆ°æœåŠ¡å™¨
- [ ] æœåŠ¡å™¨å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

### åŸŸåå‡†å¤‡

- [ ] å·²è´­ä¹°åŸŸå
- [ ] åŸŸåå·²å¤‡æ¡ˆï¼ˆå¦‚åœ¨ä¸­å›½å¤§é™†ï¼‰
- [ ] DNS å·²é…ç½® A è®°å½•æŒ‡å‘æœåŠ¡å™¨ IP

### é…ç½®å‡†å¤‡

- [ ] å·²å‡†å¤‡ MySQL æ•°æ®åº“å¯†ç ï¼ˆå¼ºå¯†ç ï¼‰
- [ ] å·²å‡†å¤‡ JWT å¯†é’¥ï¼ˆéšæœºå­—ç¬¦ä¸²ï¼‰
- [ ] å·²å‡†å¤‡ OpenAI API Keyï¼ˆå¦‚ä½¿ç”¨ AI åŠŸèƒ½ï¼‰
- [ ] å·²ä¸‹è½½å¾®ä¿¡ä¸šåŠ¡åŸŸåæ ¡éªŒæ–‡ä»¶

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šä¸Šä¼ é¡¹ç›®

```bash
# æœ¬åœ°æ‰§è¡Œ
cd /Users/shialei/vueProjectDemo
tar -czf msl-customer-service.tar.gz msl-customer-service/
scp msl-customer-service.tar.gz root@YOUR_SERVER_IP:/opt/
```

- [ ] é¡¹ç›®æ–‡ä»¶å·²ä¸Šä¼ åˆ°æœåŠ¡å™¨
- [ ] æ–‡ä»¶å®Œæ•´æ€§å·²éªŒè¯

### ç¬¬äºŒæ­¥ï¼šè§£å‹å’Œé…ç½®

```bash
# æœåŠ¡å™¨æ‰§è¡Œ
cd /opt
tar -xzf msl-customer-service.tar.gz
cd msl-customer-service
```

- [ ] é¡¹ç›®å·²è§£å‹
- [ ] ç›®å½•ç»“æ„å®Œæ•´

### ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶

#### backend/config/config.yaml

```yaml
database:
  password: YOUR_STRONG_PASSWORD # âœ“ å·²ä¿®æ”¹
jwt:
  secret: YOUR_RANDOM_SECRET_KEY # âœ“ å·²ä¿®æ”¹
ai:
  api_key: YOUR_OPENAI_API_KEY # âœ“ å·²ä¿®æ”¹ï¼ˆå¦‚ä½¿ç”¨ï¼‰
```

- [ ] æ•°æ®åº“å¯†ç å·²ä¿®æ”¹
- [ ] JWT å¯†é’¥å·²ä¿®æ”¹
- [ ] AI é…ç½®å·²è®¾ç½®ï¼ˆå¦‚éœ€è¦ï¼‰

#### docker-compose.yml

```yaml
mysql:
  environment:
    MYSQL_ROOT_PASSWORD: YOUR_STRONG_ROOT_PASSWORD # âœ“ å·²ä¿®æ”¹
    MYSQL_PASSWORD: YOUR_STRONG_PASSWORD # âœ“ å·²ä¿®æ”¹
```

- [ ] MySQL root å¯†ç å·²ä¿®æ”¹
- [ ] MySQL ç”¨æˆ·å¯†ç å·²ä¿®æ”¹ï¼ˆä¸ config.yaml ä¸€è‡´ï¼‰

### ç¬¬å››æ­¥ï¼šè¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
sudo bash deploy-ubuntu.sh
```

- [ ] Docker å·²å®‰è£…
- [ ] é˜²ç«å¢™å·²é…ç½®
- [ ] æœåŠ¡å·²å¯åŠ¨
- [ ] å®¹å™¨çŠ¶æ€æ­£å¸¸

### ç¬¬äº”æ­¥ï¼šéªŒè¯æœåŠ¡

```bash
# æ£€æŸ¥å®¹å™¨
docker compose ps

# æµ‹è¯•åç«¯
curl http://localhost:8080/health

# æµ‹è¯•å‰ç«¯
curl http://localhost
```

- [ ] 4 ä¸ªå®¹å™¨éƒ½åœ¨è¿è¡Œ
- [ ] åç«¯å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] å‰ç«¯å¯ä»¥è®¿é—®

## ğŸ”’ HTTPS é…ç½®

### å®‰è£… SSL è¯ä¹¦

```bash
# 1. åœæ­¢å‰ç«¯
docker compose stop frontend

# 2. å®‰è£…certbot
apt install -y certbot

# 3. è·å–è¯ä¹¦
certbot certonly --standalone -d your-domain.com

# 4. ä¿®æ”¹nginxé…ç½®
vim frontend/nginx.conf  # æ·»åŠ SSLé…ç½®

# 5. ä¿®æ”¹docker-compose.yml
vim docker-compose.yml   # æŒ‚è½½è¯ä¹¦ç›®å½•

# 6. é‡å¯
docker compose up -d --build
```

- [ ] Certbot å·²å®‰è£…
- [ ] SSL è¯ä¹¦å·²è·å–
- [ ] Nginx é…ç½®å·²æ›´æ–°
- [ ] Docker é…ç½®å·²æ›´æ–°
- [ ] HTTPS å¯ä»¥è®¿é—®

### è®¾ç½®è‡ªåŠ¨ç»­æœŸ

```bash
crontab -e
# æ·»åŠ : 0 2 1 * * certbot renew --quiet && docker compose restart frontend
```

- [ ] å®šæ—¶ä»»åŠ¡å·²è®¾ç½®

## ğŸ“± å¾®ä¿¡å°ç¨‹åºé…ç½®

### ä¸šåŠ¡åŸŸåé…ç½®

1. ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°
2. è¿›å…¥ï¼šå¼€å‘ -> å¼€å‘ç®¡ç† -> å¼€å‘è®¾ç½® -> ä¸šåŠ¡åŸŸå
3. ä¸‹è½½æ ¡éªŒæ–‡ä»¶
4. ä¸Šä¼ åˆ°æœåŠ¡å™¨

```bash
scp WxVerifyFile.txt root@YOUR_SERVER_IP:/opt/msl-customer-service/frontend/public/
```

5. é‡æ–°æ„å»ºå‰ç«¯

```bash
docker compose build frontend
docker compose up -d frontend
```

6. åœ¨å¾®ä¿¡åå°æ·»åŠ åŸŸå

- [ ] æ ¡éªŒæ–‡ä»¶å·²ä¸Šä¼ 
- [ ] å‰ç«¯å·²é‡æ–°æ„å»º
- [ ] åŸŸåå·²æ·»åŠ åˆ°å¾®ä¿¡åå°
- [ ] åŸŸåéªŒè¯é€šè¿‡

### å°ç¨‹åºä»£ç é›†æˆ

#### 1. æ·»åŠ å®¢æœå…¥å£ï¼ˆpages/mine/mine.wxmlï¼‰

```xml
<view class="menu-item" bindtap="onCustomerService">
  <van-icon name="service-o" />
  <text>æ™ºèƒ½å®¢æœ</text>
</view>
```

- [ ] å®¢æœå…¥å£å·²æ·»åŠ 

#### 2. æ·»åŠ è·³è½¬æ–¹æ³•ï¼ˆpages/mine/mine.tsï¼‰

```typescript
onCustomerService() {
  const token = wx.getStorageSync("token");
  const { userMobile, userName } = this.data.userInfo;
  wx.navigateTo({
    url: `/pages/customer-service/index?token=${token}&userMobile=${userMobile}&userName=${userName}`,
  });
}
```

- [ ] è·³è½¬æ–¹æ³•å·²æ·»åŠ 

#### 3. åˆ›å»ºå®¢æœé¡µé¢

- [ ] pages/customer-service/index.wxml å·²åˆ›å»º
- [ ] pages/customer-service/index.ts å·²åˆ›å»º
- [ ] pages/customer-service/index.json å·²åˆ›å»º
- [ ] pages/customer-service/index.wxss å·²åˆ›å»º

#### 4. é…ç½® app.json

```json
{
  "pages": [
    "pages/customer-service/index" // æ·»åŠ è¿™ä¸€è¡Œ
  ]
}
```

- [ ] é¡µé¢è·¯å¾„å·²æ·»åŠ åˆ° app.json

## ğŸ”§ åŠŸèƒ½æµ‹è¯•

### åŸºç¡€åŠŸèƒ½

- [ ] å¯ä»¥è®¿é—®å‰ç«¯é¡µé¢
- [ ] å¯ä»¥é€šè¿‡ URL å‚æ•°ä¼ é€’ token
- [ ] WebSocket å¯ä»¥è¿æ¥
- [ ] å¯ä»¥å‘é€å’Œæ¥æ”¶æ¶ˆæ¯
- [ ] AI å›å¤åŠŸèƒ½æ­£å¸¸
- [ ] FAQ æŸ¥è¯¢åŠŸèƒ½æ­£å¸¸
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] åé¦ˆæäº¤åŠŸèƒ½æ­£å¸¸

### å°ç¨‹åºé›†æˆ

- [ ] å°ç¨‹åºå¯ä»¥æ‰“å¼€å®¢æœé¡µé¢
- [ ] token æ­£ç¡®ä¼ é€’
- [ ] ç”¨æˆ·ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
- [ ] èŠå¤©åŠŸèƒ½æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸

### æ€§èƒ½æµ‹è¯•

- [ ] é¡µé¢åŠ è½½é€Ÿåº¦ < 2 ç§’
- [ ] æ¶ˆæ¯å“åº”æ—¶é—´ < 500ms
- [ ] AI å›å¤æ—¶é—´ < 3 ç§’
- [ ] å¯ä»¥å¤„ç†å¤šä¸ªå¹¶å‘è¿æ¥

## ğŸ›¡ï¸ å®‰å…¨æ£€æŸ¥

### å¯†ç å®‰å…¨

- [ ] MySQL root å¯†ç å·²ä¿®æ”¹ï¼ˆå¼ºå¯†ç ï¼‰
- [ ] MySQL ç”¨æˆ·å¯†ç å·²ä¿®æ”¹ï¼ˆå¼ºå¯†ç ï¼‰
- [ ] JWT å¯†é’¥å·²ä¿®æ”¹ï¼ˆéšæœºå­—ç¬¦ä¸²ï¼‰
- [ ] æ‰€æœ‰é»˜è®¤å¯†ç å·²æ›´æ”¹

### ç½‘ç»œå®‰å…¨

- [ ] é˜²ç«å¢™å·²å¯ç”¨
- [ ] åªå¼€æ”¾å¿…è¦ç«¯å£ï¼ˆ22, 80, 443ï¼‰
- [ ] SSH ç«¯å£å·²ä¿®æ”¹ï¼ˆå¯é€‰ï¼‰
- [ ] å·²ç¦ç”¨ root SSH ç™»å½•ï¼ˆå¯é€‰ï¼‰

### åº”ç”¨å®‰å…¨

- [ ] HTTPS å·²é…ç½®
- [ ] SSL è¯ä¹¦æœ‰æ•ˆ
- [ ] CORS é…ç½®æ­£ç¡®
- [ ] æ–‡ä»¶ä¸Šä¼ æœ‰å¤§å°é™åˆ¶
- [ ] æ–‡ä»¶ç±»å‹æœ‰éªŒè¯

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### æ—¥å¿—é…ç½®

- [ ] å¯ä»¥æŸ¥çœ‹åº”ç”¨æ—¥å¿—
- [ ] å¯ä»¥æŸ¥çœ‹é”™è¯¯æ—¥å¿—
- [ ] æ—¥å¿—è½®è½¬å·²é…ç½®

### å¤‡ä»½é…ç½®

- [ ] å¤‡ä»½è„šæœ¬å·²åˆ›å»º
- [ ] å®šæ—¶å¤‡ä»½å·²è®¾ç½®ï¼ˆæ¯å¤© 3 ç‚¹ï¼‰
- [ ] å¤‡ä»½ç›®å½•å·²åˆ›å»º
- [ ] æµ‹è¯•å¤‡ä»½æ¢å¤æµç¨‹

### ç›‘æ§é…ç½®

- [ ] å¯ä»¥æŸ¥çœ‹æœåŠ¡çŠ¶æ€
- [ ] å¯ä»¥æŸ¥çœ‹èµ„æºä½¿ç”¨
- [ ] å¥åº·æ£€æŸ¥æ­£å¸¸
- [ ] å‘Šè­¦æœºåˆ¶å·²é…ç½®ï¼ˆå¯é€‰ï¼‰

## ğŸ“ æ–‡æ¡£æ£€æŸ¥

- [ ] README.md å·²é˜…è¯»
- [ ] UBUNTU_DEPLOYMENT.md å·²é˜…è¯»
- [ ] QUICK_START.md å·²é˜…è¯»
- [ ] miniprogram-integration-example.md å·²é˜…è¯»
- [ ] è¿ç»´æ–‡æ¡£å·²å‡†å¤‡

## âœ… ä¸Šçº¿å‰æœ€ç»ˆæ£€æŸ¥

### æœåŠ¡æ£€æŸ¥

```bash
# 1. æ£€æŸ¥æ‰€æœ‰å®¹å™¨
docker compose ps

# 2. æ£€æŸ¥å¥åº·çŠ¶æ€
curl https://your-domain.com/api/health

# 3. æ£€æŸ¥å‰ç«¯
curl https://your-domain.com

# 4. æŸ¥çœ‹æ—¥å¿—
docker compose logs --tail=50
```

- [ ] æ‰€æœ‰å®¹å™¨è¿è¡Œæ­£å¸¸
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] å‰ç«¯å¯è®¿é—®
- [ ] æ²¡æœ‰é”™è¯¯æ—¥å¿—

### åŠŸèƒ½æ£€æŸ¥

- [ ] ç”¨æˆ·å¯ä»¥æ­£å¸¸ç™»å½•
- [ ] èŠå¤©åŠŸèƒ½æ­£å¸¸
- [ ] AI å›å¤æ­£å¸¸
- [ ] FAQ æŸ¥è¯¢æ­£å¸¸
- [ ] æ–‡ä»¶ä¸Šä¼ æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸
- [ ] PC ç«¯æ˜¾ç¤ºæ­£å¸¸

### æ€§èƒ½æ£€æŸ¥

- [ ] å“åº”é€Ÿåº¦æ­£å¸¸
- [ ] æ²¡æœ‰å†…å­˜æ³„æ¼
- [ ] CPU ä½¿ç”¨ç‡æ­£å¸¸
- [ ] ç£ç›˜ç©ºé—´å……è¶³

### å®‰å…¨æ£€æŸ¥

- [ ] HTTPS æ­£å¸¸å·¥ä½œ
- [ ] æ‰€æœ‰å¯†ç å·²ä¿®æ”¹
- [ ] é˜²ç«å¢™è§„åˆ™æ­£ç¡®
- [ ] æ²¡æœ‰å®‰å…¨æ¼æ´

## ğŸ‰ ä¸Šçº¿

### ä¸Šçº¿æ­¥éª¤

1. [ ] é€šçŸ¥ç›¸å…³äººå‘˜
2. [ ] åœ¨å°ç¨‹åºä¸­å¯ç”¨å®¢æœåŠŸèƒ½
3. [ ] å‘å¸ƒå°ç¨‹åºæ›´æ–°
4. [ ] ç›‘æ§æœåŠ¡çŠ¶æ€
5. [ ] æ”¶é›†ç”¨æˆ·åé¦ˆ

### ä¸Šçº¿åç›‘æ§ï¼ˆç¬¬ä¸€å‘¨ï¼‰

- [ ] æ¯å¤©æ£€æŸ¥æœåŠ¡çŠ¶æ€
- [ ] æ¯å¤©æŸ¥çœ‹é”™è¯¯æ—¥å¿—
- [ ] ç›‘æ§ç”¨æˆ·ä½¿ç”¨æƒ…å†µ
- [ ] åŠæ—¶å¤„ç†é—®é¢˜
- [ ] æ”¶é›†æ”¹è¿›å»ºè®®

## ğŸ“ åº”æ€¥è”ç³»

### é—®é¢˜åˆ†ç±»

- **ç´§æ€¥é—®é¢˜**ï¼ˆæœåŠ¡å®•æœºï¼‰ï¼šç«‹å³å¤„ç†
- **é‡è¦é—®é¢˜**ï¼ˆåŠŸèƒ½å¼‚å¸¸ï¼‰ï¼š24 å°æ—¶å†…å¤„ç†
- **ä¸€èˆ¬é—®é¢˜**ï¼ˆä¼˜åŒ–å»ºè®®ï¼‰ï¼šä¸€å‘¨å†…å¤„ç†

### åº”æ€¥æµç¨‹

1. æŸ¥çœ‹æ—¥å¿—ç¡®è®¤é—®é¢˜
2. å°è¯•é‡å¯æœåŠ¡
3. æ£€æŸ¥é…ç½®æ–‡ä»¶
4. æ¢å¤å¤‡ä»½ï¼ˆå¦‚éœ€è¦ï¼‰
5. è”ç³»æŠ€æœ¯æ”¯æŒ

## ğŸ“ˆ åç»­ä¼˜åŒ–

### çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2 å‘¨ï¼‰

- [ ] ä¼˜åŒ– AI å›å¤è´¨é‡
- [ ] å¢åŠ  FAQ å†…å®¹
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ
- [ ] æ·»åŠ æ›´å¤šåŠŸèƒ½

### ä¸­æœŸä¼˜åŒ–ï¼ˆ1-2 æœˆï¼‰

- [ ] æ·»åŠ äººå·¥å®¢æœ
- [ ] æ•°æ®ç»Ÿè®¡åˆ†æ
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] ç”¨æˆ·ä½“éªŒæ”¹è¿›

### é•¿æœŸè§„åˆ’ï¼ˆ3-6 æœˆï¼‰

- [ ] çŸ¥è¯†åº“ç³»ç»Ÿ
- [ ] AI æ¨¡å‹è®­ç»ƒ
- [ ] å¤šæ¸ é“æ¥å…¥
- [ ] æ™ºèƒ½æ¨è

---

## âœ¨ å®Œæˆæ ‡å¿—

å½“ä»¥ä¸Šæ‰€æœ‰é¡¹ç›®éƒ½æ‰“å‹¾åï¼Œè¯´æ˜éƒ¨ç½²å·²å®Œæˆï¼Œå¯ä»¥æ­£å¼ä¸Šçº¿ï¼

**éƒ¨ç½²æ—¥æœŸ**: ****\_\_\_****  
**éƒ¨ç½²äººå‘˜**: ****\_\_\_****  
**éªŒæ”¶äººå‘˜**: ****\_\_\_****  
**ä¸Šçº¿æ—¥æœŸ**: ****\_\_\_****
